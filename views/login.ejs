<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>로그인</title>
</head>
<body>

<h3>로그인</h3>
<form action="" method="post">
    <table>
        <tr>
            <td>ID : </td>
            <td><input type="text" id="Id" name="Id"></td>
        </tr>
        <tr>
            <td>password : </td>
            <td><input type="password" id="password" name="password"></td>
        </tr>
        <tr>
            <td><input type="submit" value="로그인"></td>
        </tr>
    </table>
</form>
<script>
    const form = document.querySelector("form")

    form.addEventListener("submit", async(a) => {
        try{
            a.preventDefault()
            const ID = document.getElementById("Id").value
            const password = document.getElementById("password").value
            const formData = new FormData()

            formData.append("id", ID)
            formData.append("password", password)

            const res = await axios.post('http://localhost:3000/api/user/login', formData,{
                headers: {
                    "Content-Type":"application/json",
                }
            })
            .then(function(response) {
                if(response?.status === 200){
                    opener.location.href = "/main"
                    window.close()
                }
            })
        } catch(error) {
            opener.location.href = "/login"
        }
    })
</script>

</body>
</html>