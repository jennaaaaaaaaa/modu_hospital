<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>로그인</title>
</head>
<body>

<form action="" method="post">
    <table>
        <tr>
            <td>Email : </td>
            <td><input type="text" id="email" name="email"></td>
        </tr>
        <tr>
            <td>password : </td>
            <td><input type="password" id="password" name="password"></td>
        </tr>
        <!-- <tr>
            <td><input type="submit" value="로그인"></td>
        </tr> -->

        <button class="button login__submit" id="login">로그인</button>
        <a href="#">비밀번호를 잊으셨나요?</a>
        <a href="회원가입페이지로 넘기기">계정이 없으신가요?</a>

    </table>
</form>
<script>
    document.getElementById("login").addEventListener("click", (event) => {
    event.preventDefault()

    const data = {
      email: document.getElementById("email").value,
      password : document.getElementById("password").value
    }

    fetch("http://localhost:3000/api/users/login", {
      credentials: "include",
      method: "POST",
      headers: {
        "Content-Type" : "application/json" //데이터 타입
      },
      body: JSON.stringify(data)
    }).then((res => consol)) //서버에서 응답한 데이터를 받을려면 then

    

    // fetch("http://localhost:3000/api/users/login", {
    //   credentials: "include",
    //   method: "POST",
    //   headers: {
    //     "Content-Type" : "application/json" //데이터 타입
    //   },
    //   body: JSON.stringify(data)
    // }).then(response => {
    //     //const token = res.headers //res.headers에 set-cookie에 담겨서 온다(아직 헤더에 안 담아줌)
    //     const refreshToken = data["refreshToken"]
    //     localStorage.setItem('refreshToken', refreshToken) //쿠키 저장??

    //     if (res.status === 200 || res.status === 201) {
    //         res.json()
    //     }.then((data) => {

    //     })


    //     if (response.status === 200) {
    //         alert("로그인 성공")
    //     }
    //   if (response.status === 400) {
    //     throw new Error("이메일 또는 비밀번호가 틀렸습니다.")
    //   } //
    //   if (response.status === 401) {
    //     throw new Error("전체 입력 바랍니다.")
    //   }
    //   response.json()

//     })
//     .then((data) => {
//       location.replace("/")
//     }).catch(err => {
//       alert(err.message)
//       window.location.reload()
//     })
  })
    
</script>

</body>
</html>